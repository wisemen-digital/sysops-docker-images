---
snippets:
  cors-api: &cors-api
    body:
      - Hey from index.php
    status: 200
    url: http://localhost:8080/api/foo
  cors-resource: &cors-resource
    body:
      - Hey from style.css
    status: 200
    url: http://localhost:8080/style.css
  cors-api-prefetch: &cors-api-prefetch
    method: OPTIONS
    status: 204
    url: http://localhost:8080/api/foo
  cors-resource-prefetch: &cors-resource-prefetch
    method: OPTIONS
    status: 204
    url: http://localhost:8080/style.css

http:
  cors index:
    body:
      - Hey from index.php
    headers:
      - 'Cross-Origin-Resource-Policy: cross-origin'
    status: 200
    url: http://localhost:8080/

  # Normal requests
  cors api apple:
    <<: *cors-api
    headers:
      - 'Access-Control-Allow-Origin: https://apple.com'
      - 'Access-Control-Allow-Credentials: true'
    request-headers:
      - 'Origin: https://apple.com'
  cors api google:
    <<: *cors-api
    headers:
      - 'Access-Control-Allow-Origin: https://google.com'
      - 'Access-Control-Allow-Credentials: true'
    request-headers:
      - 'Origin: https://google.com'
  cors resource apple:
    <<: *cors-resource
    headers:
      - 'Access-Control-Allow-Origin: https://apple.com'
      - 'Access-Control-Allow-Credentials: true'
      - 'Cross-Origin-Resource-Policy: cross-origin'
    request-headers:
      - 'Origin: https://apple.com'
  cors resource google:
    <<: *cors-resource
    headers:
      - 'Access-Control-Allow-Origin: https://google.com'
      - 'Access-Control-Allow-Credentials: true'
      - 'Cross-Origin-Resource-Policy: cross-origin'
    request-headers:
      - 'Origin: https://google.com'

  # Prefetches
  cors api apple prefetch:
    <<: *cors-api-prefetch
    headers:
      - 'Access-Control-Allow-Origin: https://apple.com'
      - 'Access-Control-Allow-Credentials: true'
    request-headers:
      - 'Origin: https://apple.com'
  cors api google prefetch:
    <<: *cors-api-prefetch
    headers:
      - 'Access-Control-Allow-Origin: https://google.com'
      - 'Access-Control-Allow-Credentials: true'
    request-headers:
      - 'Origin: https://google.com'
  cors api denied prefetch:
    <<: *cors-api-prefetch
    request-headers:
      - 'Origin: https://example.com'
    status: 403
  cors resource apple prefetch:
    <<: *cors-resource-prefetch
    headers:
      - 'Access-Control-Allow-Origin: https://apple.com'
      - 'Access-Control-Allow-Credentials: true'
    request-headers:
      - 'Origin: https://apple.com'
  cors resource google prefetch:
    <<: *cors-resource-prefetch
    headers:
      - 'Access-Control-Allow-Origin: https://google.com'
      - 'Access-Control-Allow-Credentials: true'
    request-headers:
      - 'Origin: https://google.com'
  cors resource denied prefetch:
    <<: *cors-resource-prefetch
    request-headers:
      - 'Origin: https://example.com'
    status: 403
