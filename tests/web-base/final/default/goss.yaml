---
http:
  # Check default headers
  index default headers: &index-html-response
    body:
      - 'Hey from index.html'
    headers:
      - 'Content-Security-Policy-Report-Only: default-src ''self'';'
      - 'Cross-Origin-Opener-Policy: same-origin'
      - 'Cross-Origin-Resource-Policy: same-origin'
      - 'Permissions-Policy: interest-cohort=()'
      - 'Referrer-Policy: same-origin'
      - 'Strict-Transport-Security'
      - 'X-Content-Type-Options: nosniff'
      - 'X-Frame-Options: deny'
      - 'X-Permitted-Cross-Domain-Policies: none'
      - 'X-Robots-Tag: none'
    status: 200
    url: http://localhost:80/
  resource default headers:
    body:
      - 'Hey from style.css'
    headers:
      - 'Access-Control-Allow-Origin: *'
      - 'Cache-Control: public, immutable, max-age=31536000, s-maxage=31536000'
      - 'Cross-Origin-Resource-Policy: same-origin'
      - 'Strict-Transport-Security'
      - 'X-Content-Type-Options: nosniff'
      - 'X-Robots-Tag: none'
    status: 200
    url: http://localhost:80/style.css

  # Check alternative paths
  alt-path index.html works:
    <<: *index-html-response
    url: http://localhost:80/index.html
  alt-path foo/bar works:
    <<: *index-html-response
    url: http://localhost:80/foo/bar

  # Check CORS
  cors prefetch index fails:
    method: OPTIONS
    status: 405
    url: http://localhost:80/
  cors prefetch resource works:
    headers:
      - 'Access-Control-Allow-Origin: *'
      - 'Access-Control-Allow-Methods'
      - 'Access-Control-Allow-Headers'
      - 'Access-Control-Max-Age'
    method: OPTIONS
    status: 204
    url: http://localhost:80/style.css

  # Check gzip
  large file gzip:
    headers:
      - 'Content-Encoding: gzip'
    request-headers:
      - 'Accept-Encoding: gzip'
    status: 200
    url: http://localhost:80/lorem.txt

  # Check robots generation
  robots default content:
    body:
      - 'User-agent: *'
      - 'Disallow'
    status: 200
    url: http://localhost:80/robots.txt
