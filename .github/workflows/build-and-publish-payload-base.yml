---
name: Build & Publish Payload Base

on:
  schedule:
    - cron: "0 0 1,15 * *"  # Every 2 weeks
  push:
    branches:
      - main
    paths:
      - '.github/actions/**'
      - '.github/workflows/build-and-publish-payload-base.yml'
      - '.github/workflows/internal-build-and-publish.yml'
      - 'common/**'
      - 'payload-base/**'
  workflow_dispatch:

jobs:
  build-and-publish:
    uses: ./.github/workflows/internal-build-and-publish.yml
    strategy:
      matrix:
        version:
          - alpine: '3.22'
            name: lts
    with:
      image: payload-base
      version: ${{ matrix.version.name }}
      build-args: |
        ALPINE_VERSION=${{ matrix.version.alpine }}
